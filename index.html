<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SIGAP GeriatriCare â€“ RSUD Pasar Rebo</title>

  <!-- PWA Manifest -->
  <link rel="manifest" href="data:application/manifest+json,{%22name%22:%22SIGAP%20GeriatriCare%22,%22short_name%22:%22SIGAP%22,%22display%22:%22standalone%22,%22background_color%22:%22#ffffff%22,%22theme_color%22:%22#00796b%22,%22start_url%22:%22/%22,%22icons%22:[{%22src%22:%22data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%2300796b'/%3E%3Ctext x='50' y='60' text-anchor='middle' fill='white' font-size='30'%3EğŸ¥%3C/text%3E%3C/svg%3E%22,%22sizes%22:%22192x192%22,%22type%22:%22image/svg+xml%22}]}"/>
  <meta name="theme-color" content="#00796b"/>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { 
        extend: { 
          fontFamily: { poppins: ['Poppins', 'sans-serif'] },
          animation: {
            'fade-in': 'fadeIn 0.5s ease-in-out',
            'slide-up': 'slideUp 0.6s ease-out',
            'bounce-gentle': 'bounceGentle 2s infinite',
          }
        } 
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body { font-family: 'Poppins', sans-serif; }
    .glass { 
      background: rgba(255, 255, 255, 0.25); 
      backdrop-filter: blur(16px) saturate(180%); 
      border: 1px solid rgba(255, 255, 255, 0.3); 
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }
    .dark .glass { 
      background: rgba(15, 23, 42, 0.6); 
      border: 1px solid rgba(255, 255, 255, 0.1); 
    }
    .gradient-text {
      background: linear-gradient(135deg, #14b8a6, #10b981, #84cc16, #eab308);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .chat-user { background: linear-gradient(135deg, #ec4899, #ef4444); }
    .chat-bot { background: linear-gradient(135deg, #6366f1, #8b5cf6); }
    .feature-card {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .feature-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.15);
    }
    .modal {
      backdrop-filter: blur(8px);
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    @keyframes bounceGentle { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
  </style>
</head>

<body class="bg-gradient-to-br from-cyan-50 via-blue-50 to-green-50 dark:from-slate-900 dark:via-gray-900 dark:to-black transition-all duration-700">

<!-- HEADER -->
<header class="sticky top-0 z-40 glass shadow-xl">
  <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
    <div class="flex items-center space-x-3">
      <div class="text-3xl animate-bounce-gentle">ğŸ¥</div>
      <div>
        <h1 class="text-xl md:text-2xl font-bold gradient-text">SIGAP GeriatriCare</h1>
        <p class="text-xs text-gray-600 dark:text-gray-400">RSUD Pasar Rebo</p>
      </div>
    </div>
    <div class="flex items-center space-x-4">
      <div class="flex items-center space-x-2">
        <button id="fontDecrease" class="text-teal-600 dark:text-yellow-300 text-sm font-bold px-2 py-1 rounded hover:bg-white/20">A-</button>
        <button id="fontIncrease" class="text-teal-600 dark:text-yellow-300 text-lg font-bold px-2 py-1 rounded hover:bg-white/20">A+</button>
      </div>
      <button id="themeToggle" class="text-2xl hover:scale-110 transition-transform">ğŸŒ™</button>
      <button id="speechToggle" class="text-xl hover:scale-110 transition-transform" title="Toggle Suara">ğŸ”Š</button>
    </div>
  </div>
</header>

<!-- HERO SECTION -->
<section class="max-w-6xl mx-auto px-4 py-12 text-center">
  <h2 class="text-4xl md:text-5xl font-extrabold mb-4">
    <span class="gradient-text">Sistem Informasi Geriatri Terpadu</span>
  </h2>
  <p class="text-lg text-gray-600 dark:text-gray-300 mb-6 max-w-3xl mx-auto">
    Platform komprehensif untuk pelayanan kesehatan lansia dengan integrasi AI, screening geriatri 14 item, dan edukasi komunitas.
  </p>
  <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
    <button onclick="openScreening()" class="bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-6 py-3 rounded-full shadow-xl hover:scale-105 transition-all font-semibold">
      ğŸ“‹ Screening Geriatri
    </button>
    <button onclick="openChat()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-full shadow-xl hover:scale-105 transition-all font-semibold">
      ğŸ’¬ Konsultasi AI
    </button>
    <button onclick="openEducation()" class="bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-3 rounded-full shadow-xl hover:scale-105 transition-all font-semibold">
      ğŸ“š Edukasi Lansia
    </button>
  </div>
</section>

<!-- QUICK ACCESS CARDS -->
<section class="max-w-6xl mx-auto px-4 mb-12">
  <h3 class="text-2xl font-bold text-center mb-8 gradient-text">Akses Cepat SIGAP</h3>
  <div class="grid md:grid-cols-3 gap-6">
    <!-- Pasien Card -->
    <div class="feature-card glass rounded-2xl p-6 text-center" onclick="openPatientAccess()">
      <div class="text-4xl mb-4">ğŸ‘¥</div>
      <h4 class="font-bold text-lg mb-2 text-gray-800 dark:text-gray-200">Akses Pasien</h4>
      <p class="text-sm text-gray-600 dark:text-gray-300 mb-4">Buku Laporan Geriatri Digital</p>
      <div class="text-xs text-gray-500">Usia 60+ tahun</div>
    </div>
    
    <!-- Family & FKTP Card -->
    <div class="feature-card glass rounded-2xl p-6 text-center" onclick="openFamilyAccess()">
      <div class="text-4xl mb-4">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
      <h4 class="font-bold text-lg mb-2 text-gray-800 dark:text-gray-200">Keluarga & FKTP</h4>
      <p class="text-sm text-gray-600 dark:text-gray-300 mb-4">Aplikasi SIGAP Mobile</p>
      <div class="text-xs text-gray-500">Caregiver & Dokter Keluarga</div>
    </div>
    
    <!-- Doctor Card -->
    <div class="feature-card glass rounded-2xl p-6 text-center" onclick="openDoctorAccess()">
      <div class="text-4xl mb-4">ğŸ‘¨â€âš•ï¸</div>
      <h4 class="font-bold text-lg mb-2 text-gray-800 dark:text-gray-200">Dokter RSUD</h4>
      <p class="text-sm text-gray-600 dark:text-gray-300 mb-4">Electronic Medical Record</p>
      <div class="text-xs text-gray-500">Rawat Jalan Geriatri</div>
    </div>
  </div>
</section>

<!-- POLI GERIATRI SECTION -->
<section class="max-w-6xl mx-auto px-4 mb-12">
  <h3 class="text-2xl font-bold text-center mb-8 gradient-text">Poli Terkait Geriatri</h3>
  <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
    <div class="feature-card glass rounded-xl p-4 text-center" onclick="openPoliInfo('jantung')">
      <div class="text-2xl mb-2">â¤ï¸</div>
      <h5 class="text-sm font-semibold">Jantung</h5>
    </div>
    <div class="feature-card glass rounded-xl p-4 text-center" onclick="openPoliInfo('dalam')">
      <div class="text-2xl mb-2">ğŸ©º</div>
      <h5 class="text-sm font-semibold">Peny. Dalam</h5>
    </div>
    <div class="feature-card glass rounded-xl p-4 text-center" onclick="openPoliInfo('saraf')">
      <div class="text-2xl mb-2">ğŸ§ </div>
      <h5 class="text-sm font-semibold">Saraf</h5>
    </div>
    <div class="feature-card glass rounded-xl p-4 text-center" onclick="openPoliInfo('ortho')">
      <div class="text-2xl mb-2">ğŸ¦´</div>
      <h5 class="text-sm font-semibold">Orthopedi</h5>
    </div>
    <div class="feature-card glass rounded-xl p-4 text-center" onclick="openPoliInfo('gizi')">
      <div class="text-2xl mb-2">ğŸ¥—</div>
      <h5 class="text-sm font-semibold">Gizi</h5>
    </div>
    <div class="feature-card glass rounded-xl p-4 text-center" onclick="openPoliInfo('rehab')">
      <div class="text-2xl mb-2">ğŸƒâ€â™‚ï¸</div>
      <h5 class="text-sm font-semibold">Rehab Medik</h5>
    </div>
  </div>
</section>

<!-- EDUKASI KOMUNITAS -->
<section class="max-w-6xl mx-auto px-4 mb-12">
  <div class="glass rounded-3xl p-6">
    <div class="text-center mb-6">
      <h3 class="text-2xl font-bold gradient-text mb-2">ğŸ“… Klub Edukasi Lansia</h3>
      <p class="text-gray-600 dark:text-gray-300">Setiap Jumat â€¢ Diskusi Kelompok â€¢ Media Visual</p>
    </div>
    
    <div class="grid md:grid-cols-3 gap-4">
      <div class="bg-white dark:bg-gray-800 rounded-xl p-4 text-center">
        <div class="text-3xl mb-2">ğŸ’Š</div>
        <h4 class="font-semibold mb-2">Farmasi</h4>
        <p class="text-sm text-gray-600 dark:text-gray-400">"Lupa Minum Obat? Begini Solusinya"</p>
        <button onclick="openEducationVideo('farmasi')" class="mt-2 bg-blue-500 text-white px-3 py-1 rounded-full text-xs hover:bg-blue-600">Tonton</button>
      </div>
      
      <div class="bg-white dark:bg-gray-800 rounded-xl p-4 text-center">
        <div class="text-3xl mb-2">ğŸƒâ€â™‚ï¸</div>
        <h4 class="font-semibold mb-2">Rehab Medik</h4>
        <p class="text-sm text-gray-600 dark:text-gray-400">"Cegah Jatuh & Jaga Jantung"</p>
        <button onclick="openEducationVideo('rehab')" class="mt-2 bg-green-500 text-white px-3 py-1 rounded-full text-xs hover:bg-green-600">Tonton</button>
      </div>
      
      <div class="bg-white dark:bg-gray-800 rounded-xl p-4 text-center">
        <div class="text-3xl mb-2">ğŸ©º</div>
        <h4 class="font-semibold mb-2">Keperawatan</h4>
        <p class="text-sm text-gray-600 dark:text-gray-400">"Hipertensi & Diabetes"</p>
        <button onclick="openEducationVideo('keperawatan')" class="mt-2 bg-purple-500 text-white px-3 py-1 rounded-full text-xs hover:bg-purple-600">Tonton</button>
      </div>
    </div>
  </div>
</section>

<!-- MODAL: SCREENING GERIATRI 14 ITEM -->
<div id="screeningModal" class="fixed inset-0 bg-black/50 backdrop-blur-md z-50 hidden items-center justify-center p-4 modal">
  <div class="w-full max-w-4xl h-[90vh] glass rounded-3xl shadow-2xl flex flex-col overflow-hidden">
    <header class="px-6 py-4 bg-gradient-to-r from-emerald-600 to-teal-500 text-white flex justify-between items-center">
      <h3 class="font-bold text-lg">ğŸ“‹ Screening Geriatri 14 Item</h3>
      <button onclick="closeScreening()" class="text-2xl hover:scale-110 transition-transform">âœ•</button>
    </header>
    
    <div class="flex-1 p-6 overflow-y-auto">
      <form id="screeningForm" class="space-y-4">
        <!-- Identitas Pasien -->
        <div class="bg-white dark:bg-gray-800 rounded-xl p-4">
          <h4 class="font-semibold mb-3 text-teal-700 dark:text-teal-300">ğŸ‘¤ Identitas Pasien</h4>
          <div class="grid md:grid-cols-2 gap-4">
            <input type="text" placeholder="Nama Lengkap" class="w-full p-3 rounded-lg border dark:bg-gray-700" required>
            <input type="number" placeholder="Usia" min="60" max="120" class="w-full p-3 rounded-lg border dark:bg-gray-700" required>
            <input type="text" placeholder="No. RM" class="w-full p-3 rounded-lg border dark:bg-gray-700" required>
            <select class="w-full p-3 rounded-lg border dark:bg-gray-700" required>
              <option value="">Jenis Kelamin</option>
              <option value="L">Laki-laki</option>
              <option value="P">Perempuan</option>
            </select>
          </div>
        </div>

        <!-- Tanda Vital -->
        <div class="bg-white dark:bg-gray-800 rounded-xl p-4">
          <h4 class="font-semibold mb-3 text-teal-700 dark:text-teal-300">ğŸ©º Tanda Vital & Kesadaran</h4>
          <div class="grid md:grid-cols-3 gap-4">
            <input type="text" placeholder="Tekanan Darah (mmHg)" class="w-full p-3 rounded-lg border dark:bg-gray-700">
            <input type="number" placeholder="Nadi (x/menit)" class="w-full p-3 rounded-lg border dark:bg-gray-700">
            <input type="number" placeholder="Suhu (Â°C)" step="0.1" class="w-full p-3 rounded-lg border dark:bg-gray-700">
            <input type="number" placeholder="Respirasi (x/menit)" class="w-full p-3 rounded-lg border dark:bg-gray-700">
            <select class="w-full p-3 rounded-lg border dark:bg-gray-700">
              <option value="">Kesadaran</option>
              <option value="composmentis">Composmentis</option>
              <option value="apatis">Apatis</option>
              <option value="somnolen">Somnolen</option>
              <option value="stupor">Stupor</option>
            </select>
          </div>
        </div>

        <!-- 14 Item Screening Geriatri -->
        <div class="bg-white dark:bg-gray-800 rounded-xl p-4">
          <h4 class="font-semibold mb-3 text-teal-700 dark:text-teal-300">ğŸ” 14 Item Screening Geriatri</h4>
          <div class="space-y-3">
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">1. Gangguan Penglihatan</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="vision" value="0"> Tidak</label>
                <label><input type="radio" name="vision" value="1"> Ya</label>
              </div>
            </div>
            
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">2. Gangguan Pendengaran</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="hearing" value="0"> Tidak</label>
                <label><input type="radio" name="hearing" value="1"> Ya</label>
              </div>
            </div>
            
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">3. Gangguan Keseimbangan/Jatuh</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="balance" value="0"> Tidak</label>
                <label><input type="radio" name="balance" value="1"> Ya</label>
              </div>
            </div>
            
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">4. Malnutrisi</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="nutrition" value="0"> Tidak</label>
                <label><input type="radio" name="nutrition" value="1"> Ya</label>
              </div>
            </div>
            
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">5. Inkontinensia Urin</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="incontinence" value="0"> Tidak</label>
                <label><input type="radio" name="incontinence" value="1"> Ya</label>
              </div>
            </div>
            
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">6. Depresi</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="depression" value="0"> Tidak</label>
                <label><input type="radio" name="depression" value="1"> Ya</label>
              </div>
            </div>
            
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">7. Gangguan Kognitif</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="cognitive" value="0"> Tidak</label>
                <label><input type="radio" name="cognitive" value="1"> Ya</label>
              </div>
            </div>
            
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">8. Polyfarmacy (>5 obat)</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="polypharmacy" value="0"> Tidak</label>
                <label><input type="radio" name="polypharmacy" value="1"> Ya</label>
              </div>
            </div>
            
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">9. Gangguan Aktivitas Harian</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="adl" value="0"> Tidak</label>
                <label><input type="radio" name="adl" value="1"> Ya</label>
              </div>
            </div>
            
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">10. Isolasi Sosial</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="social" value="0"> Tidak</label>
                <label><input type="radio" name="social" value="1"> Ya</label>
              </div>
            </div>
            
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">11. Gangguan Tidur</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="sleep" value="0"> Tidak</label>
                <label><input type="radio" name="sleep" value="1"> Ya</label>
              </div>
            </div>
            
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">12. Nyeri Kronis</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="pain" value="0"> Tidak</label>
                <label><input type="radio" name="pain" value="1"> Ya</label>
              </div>
            </div>
            
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">13. Riwayat Hospitalisasi</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="hospitalization" value="0"> Tidak</label>
                <label><input type="radio" name="hospitalization" value="1"> Ya</label>
              </div>
            </div>
            
            <div class="screening-item">
              <label class="block text-sm font-medium mb-1">14. Dukungan Sosial Kurang</label>
              <div class="flex space-x-4">
                <label><input type="radio" name="support" value="0"> Tidak</label>
                <label><input type="radio" name="support" value="1"> Ya</label>
              </div>
            </div>
          </div>
        </div>

        <button type="submit" class="w-full bg-gradient-to-r from-emerald-600 to-teal-500 text-white py-3 rounded-xl font-semibold hover:scale-[1.02] transition-all">
          ğŸ“Š Analisis Hasil Screening
        </button>
      </form>

      <div id="screeningResult" class="mt-6 hidden"></div>
    </div>
  </div>
</div>

<!-- MODAL: AI CHAT -->
<div id="chatModal" class="fixed inset-0 bg-black/50 backdrop-blur-md z-50 hidden items-center justify-center p-4 modal">
  <div class="w-full max-w-2xl h-[80vh] glass rounded-3xl shadow-2xl flex flex-col overflow-hidden">
    <header class="px-6 py-4 bg-gradient-to-r from-purple-600 to-pink-500 text-white flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
        <span class="font-semibold">ğŸ¤– AI Geriatri Assistant</span>
      </div>
      <button onclick="closeChat()" class="text-xl hover:scale-110 transition-transform">âœ•</button>
    </header>
    
    <div id="chatBody" class="flex-1 p-4 space-y-3 overflow-y-auto bg-gradient-to-b from-gray-50 to-white dark:from-gray-800 dark:to-gray-900">
      <div class="chat-bot text-white p-3 rounded-2xl rounded-bl-md max-w-xs text-sm">
        <p>ğŸ‘‹ Halo! Saya AI Assistant untuk SIGAP GeriatriCare. Saya dapat membantu informasi tentang screening geriatri, edukasi kesehatan lansia, dan konsultasi umum. Ada yang bisa saya bantu?</p>
      </div>
    </div>
    
    <footer class="p-4 bg-white/50 dark:bg-gray-800/50">
      <div class="flex space-x-2">
        <input id="chatInput" type="text" placeholder="Tanyakan tentang kesehatan geriatri..." 
               class="flex-1 p-3 rounded-2xl border dark:bg-gray-700 focus:border-purple-500 transition-colors text-sm"/>
        <button onclick="sendMessage()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-3 rounded-2xl hover:scale-105 transition-transform">
          ğŸ“¤
        </button>
      </div>
    </footer>
  </div>
</div>

<!-- MODAL: EDUCATION -->
<div id="educationModal" class="fixed inset-0 bg-black/50 backdrop-blur-md z-50 hidden items-center justify-center p-4 modal">
  <div class="w-full max-w-4xl h-[80vh] glass rounded-3xl shadow-2xl flex flex-col overflow-hidden">
    <header class="px-6 py-4 bg-gradient-to-r from-orange-600 to-red-500 text-white flex justify-between items-center">
      <h3 class="font-bold text-lg">ğŸ“š Pusat Edukasi Lansia</h3>
      <button onclick="closeEducation()" class="text-2xl hover:scale-110 transition-transform">âœ•</button>
    </header>
    
    <div class="flex-1 p-6 overflow-y-auto">
      <div id="educationContent">
        <div class="grid md:grid-cols-2 gap-6 mb-6">
          <div class="bg-white dark:bg-gray-800 rounded-xl p-4">
            <h4 class="font-semibold mb-2 text-orange-700 dark:text-orange-300">ğŸ¥ Video Edukasi</h4>
            <div class="space-y-2">
              <button onclick="playEducationVideo('dm')" class="w-full text-left p-2 rounded bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-sm">
                ğŸ“¹ Manajemen Diabetes Mellitus
              </button>
              <button onclick="playEducationVideo('hipertensi')" class="w-full text-left p-2 rounded bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-sm">
                ğŸ“¹ Pola Makan untuk Hipertensi
              </button>
              <button onclick="playEducationVideo('jatuh')" class="w-full text-left p-2 rounded bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-sm">
                ğŸ“¹ Pencegahan Jatuh pada Lansia
              </button>
              <button onclick="playEducationVideo('jantung')" class="w-full text-left p-2 rounded bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-sm">
                ğŸ“¹ Mengenali Risiko Jantung
              </button>
              <button onclick="playEducationVideo('obat')" class="w-full text-left p-2 rounded bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-sm">
                ğŸ“¹ Tips Jika Lupa Minum Obat
             </button>
           </div>
         </div>
         
         <div class="bg-white dark:bg-gray-800 rounded-xl p-4">
           <h4 class="font-semibold mb-2 text-orange-700 dark:text-orange-300">ğŸ“… Jadwal Klub Edukasi</h4>
           <div class="text-sm space-y-2">
             <div class="p-2 bg-blue-50 dark:bg-blue-900/20 rounded">
               <strong>Setiap Jumat, 09:00 WIB</strong><br>
               ğŸ“ Ruang Edukasi Geriatri RSUD Pasar Rebo
             </div>
             <div class="p-2 bg-green-50 dark:bg-green-900/20 rounded">
               <strong>Minggu ini:</strong> Farmasi<br>
               "Apa yang Harus Dilakukan Jika Lupa Minum Obat?"
             </div>
             <div class="p-2 bg-purple-50 dark:bg-purple-900/20 rounded">
               <strong>Minggu depan:</strong> Rehab Medik<br>
               "Pencegahan Jatuh dan Risiko Jantung"
             </div>
           </div>
         </div>
       </div>
       
       <div id="videoPlayer" class="hidden bg-black rounded-xl p-4 text-center">
         <div class="text-white mb-4">
           <h5 id="videoTitle" class="font-semibold"></h5>
         </div>
         <div class="bg-gray-800 rounded-lg p-8 text-white">
           <div class="text-6xl mb-4">ğŸ“º</div>
           <p id="videoDescription"></p>
           <button onclick="closeVideo()" class="mt-4 bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">Tutup Video</button>
         </div>
       </div>
     </div>
   </div>
 </div>
</div>

<!-- FOOTER -->
<footer class="bg-gradient-to-r from-teal-600 to-emerald-600 text-white py-6">
 <div class="max-w-6xl mx-auto px-4 text-center">
   <div class="flex items-center justify-center space-x-2 mb-2">
     <span class="text-xl">ğŸ¥</span>
     <span class="font-bold">SIGAP GeriatriCare</span>
   </div>
   <p class="text-sm text-gray-200 mb-1">Â© 2025 RSUD Pasar Rebo â€“ Sistem Informasi Geriatri Terpadu</p>
   <p class="text-xs text-gray-300">Rawat Jalan â€¢ Screening 14 Item â€¢ Edukasi Komunitas</p>
 </div>
</footer>

<!-- SCRIPTS -->
<script>
/* === GLOBAL VARIABLES === */
let fontSize = 16;
let speechEnabled = true;
let currentUser = null;

/* === THEME & SETTINGS === */
const html = document.documentElement;
const themeBtn = document.getElementById('themeToggle');
const speechBtn = document.getElementById('speechToggle');
const fontInc = document.getElementById('fontIncrease');
const fontDec = document.getElementById('fontDecrease');

// Theme toggle
function toggleTheme() {
 html.classList.toggle('dark');
 const isDark = html.classList.contains('dark');
 themeBtn.innerHTML = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
 localStorage.setItem('theme', isDark ? 'dark' : 'light');
}

// Font controls
function increaseFontSize() {
 if (fontSize < 20) {
   fontSize += 2;
   document.body.style.fontSize = fontSize + 'px';
   localStorage.setItem('fontSize', fontSize);
 }
}

function decreaseFontSize() {
 if (fontSize > 12) {
   fontSize -= 2;
   document.body.style.fontSize = fontSize + 'px';
   localStorage.setItem('fontSize', fontSize);
 }
}

// Speech toggle
function toggleSpeech() {
 speechEnabled = !speechEnabled;
 speechBtn.innerHTML = speechEnabled ? 'ğŸ”Š' : 'ğŸ”‡';
 speechBtn.title = speechEnabled ? 'Matikan Suara' : 'Nyalakan Suara';
}

// Event listeners
themeBtn.addEventListener('click', toggleTheme);
fontInc.addEventListener('click', increaseFontSize);
fontDec.addEventListener('click', decreaseFontSize);
speechBtn.addEventListener('click', toggleSpeech);

// Load saved settings
if (localStorage.getItem('theme') === 'dark') {
 html.classList.add('dark');
 themeBtn.innerHTML = 'â˜€ï¸';
}

const savedFontSize = localStorage.getItem('fontSize');
if (savedFontSize) {
 fontSize = parseInt(savedFontSize);
 document.body.style.fontSize = fontSize + 'px';
}

/* === TEXT-TO-SPEECH === */
function speakText(text) {
 if (!speechEnabled || !window.speechSynthesis) return;
 
 window.speechSynthesis.cancel();
 const utterance = new SpeechSynthesisUtterance(text);
 utterance.lang = 'id-ID';
 utterance.rate = 0.8;
 utterance.pitch = 1;
 window.speechSynthesis.speak(utterance);
}

/* === MODAL FUNCTIONS === */
function openScreening() {
 document.getElementById('screeningModal').classList.remove('hidden');
 document.getElementById('screeningModal').classList.add('flex');
}

function closeScreening() {
 document.getElementById('screeningModal').classList.add('hidden');
 document.getElementById('screeningModal').classList.remove('flex');
}

function openChat() {
 document.getElementById('chatModal').classList.remove('hidden');
 document.getElementById('chatModal').classList.add('flex');
 document.getElementById('chatInput').focus();
}

function closeChat() {
 document.getElementById('chatModal').classList.add('hidden');
 document.getElementById('chatModal').classList.remove('flex');
}

function openEducation() {
 document.getElementById('educationModal').classList.remove('hidden');
 document.getElementById('educationModal').classList.add('flex');
}

function closeEducation() {
 document.getElementById('educationModal').classList.add('hidden');
 document.getElementById('educationModal').classList.remove('flex');
}

/* === ACCESS FUNCTIONS === */
function openPatientAccess() {
 alert('ğŸ” Akses Pasien\n\nUntuk mengakses Buku Laporan Geriatri Digital, silakan login dengan:\nâ€¢ Nomor RM\nâ€¢ Tanggal lahir\n\nFitur: Lihat hasil screening, jadwal kontrol, edukasi personal');
}

function openFamilyAccess() {
 alert('ğŸ“± Akses Keluarga & FKTP\n\nUntuk mengakses Aplikasi SIGAP Mobile:\nâ€¢ Download aplikasi SIGAP\nâ€¢ Registrasi sebagai caregiver/FKTP\nâ€¢ Verifikasi dengan admin RS\n\nFitur: Monitor pasien, komunikasi dengan tim medis');
}

function openDoctorAccess() {
 alert('ğŸ‘¨â€âš•ï¸ Akses Dokter RSUD\n\nLogin ERM (Electronic Medical Record):\nâ€¢ Username: dokter.geriatri\nâ€¢ Password: [sesuai kebijakan RS]\n\nFitur: Input screening, diagnosis, resep, rujukan internal');
}

/* === POLI INFO === */
function openPoliInfo(poli) {
 const poliData = {
   jantung: {
     nama: 'Poli Jantung',
     dokter: 'Dr. Sp.JP',
     jadwal: 'Senin-Jumat 08:00-12:00',
     layanan: 'EKG, Echo, Stress Test',
     info: 'Khusus lansia dengan keluhan jantung, nyeri dada, sesak napas'
   },
   dalam: {
     nama: 'Poli Penyakit Dalam',
     dokter: 'Dr. Sp.PD',
     jadwal: 'Senin-Sabtu 08:00-14:00',
     layanan: 'Hipertensi, Diabetes, Metabolik',
     info: 'Penanganan penyakit dalam komprehensif untuk geriatri'
   },
   saraf: {
     nama: 'Poli Saraf',
     dokter: 'Dr. Sp.S',
     jadwal: 'Selasa, Kamis 08:00-12:00',
     layanan: 'Demensia, Stroke, Parkinson',
     info: 'Evaluasi kognitif dan gangguan neurologis lansia'
   },
   ortho: {
     nama: 'Poli Orthopedi',
     dokter: 'Dr. Sp.OT',
     jadwal: 'Senin, Rabu, Jumat 08:00-12:00',
     layanan: 'Osteoporosis, Arthritis, Fraktur',
     info: 'Kesehatan tulang dan sendi untuk lansia'
   },
   gizi: {
     nama: 'Poli Gizi',
     dokter: 'Ahli Gizi Klinik',
     jadwal: 'Senin-Jumat 08:00-15:00',
     layanan: 'Konsultasi diet, Malnutrisi',
     info: 'Penyusunan diet khusus geriatri dan edukasi gizi'
   },
   rehab: {
     nama: 'Poli Rehab Medik',
     dokter: 'Dr. Sp.KFR',
     jadwal: 'Senin-Jumat 08:00-16:00',
     layanan: 'Fisioterapi, Terapi Okupasi',
     info: 'Rehabilitasi fisik dan pencegahan jatuh'
   }
 };
 
 const data = poliData[poli];
 alert(`ğŸ¥ ${data.nama}\n\nğŸ‘¨â€âš•ï¸ ${data.dokter}\nğŸ“… ${data.jadwal}\nğŸ©º ${data.layanan}\n\nâ„¹ï¸ ${data.info}\n\nKlik 'Screening Geriatri' untuk evaluasi awal sebelum konsultasi.`);
}

/* === SCREENING GERIATRI === */
document.getElementById('screeningForm').addEventListener('submit', function(e) {
 e.preventDefault();
 
 // Calculate screening score
 let totalScore = 0;
 const screeningItems = [
   'vision', 'hearing', 'balance', 'nutrition', 'incontinence',
   'depression', 'cognitive', 'polypharmacy', 'adl', 'social',
   'sleep', 'pain', 'hospitalization', 'support'
 ];
 
 let checkedItems = 0;
 screeningItems.forEach(item => {
   const selected = document.querySelector(`input[name="${item}"]:checked`);
   if (selected) {
     checkedItems++;
     totalScore += parseInt(selected.value);
   }
 });
 
 if (checkedItems < 14) {
   alert('âš ï¸ Mohon lengkapi semua 14 item screening!');
   return;
 }
 
 displayScreeningResult(totalScore);
});

function displayScreeningResult(score) {
 let risk, color, recommendations;
 
 if (score >= 8) {
   risk = 'TINGGI';
   color = 'text-red-600';
   recommendations = [
     'Rujuk ke dokter spesialis geriatri segera',
     'Evaluasi komprehensif CGA (Comprehensive Geriatric Assessment)',
     'Koordinasi tim multidisiplin',
     'Follow up ketat setiap 2 minggu'
   ];
 } else if (score >= 5) {
   risk = 'SEDANG';
   color = 'text-orange-600';
   recommendations = [
     'Konsultasi dokter geriatri dalam 1 minggu',
     'Screening lanjutan sesuai domain positif',
     'Edukasi dan intervensi dini',
     'Follow up setiap bulan'
   ];
 } else if (score >= 2) {
   risk = 'RENDAH';
   color = 'text-yellow-600';
   recommendations = [
     'Monitoring berkala',
     'Edukasi pencegahan',
     'Screening ulang 6 bulan',
     'Pertahankan aktivitas optimal'
   ];
 } else {
   risk = 'MINIMAL';
   color = 'text-green-600';
   recommendations = [
     'Status geriatri baik',
     'Pertahankan gaya hidup sehat',
     'Screening tahunan',
     'Tetap aktif bersosialisasi'
   ];
 }
 
 const resultDiv = document.getElementById('screeningResult');
 resultDiv.innerHTML = `
   <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
     <h4 class="text-xl font-bold mb-4 text-center">ğŸ“Š Hasil Screening Geriatri</h4>
     
     <div class="text-center mb-6">
       <div class="text-4xl font-bold ${color} mb-2">${score}/14</div>
       <div class="text-lg font-semibold ${color}">Risiko ${risk}</div>
     </div>
     
     <div class="mb-6">
       <h5 class="font-semibold mb-3">ğŸ’¡ Rekomendasi Tindak Lanjut:</h5>
       <ul class="space-y-2">
         ${recommendations.map(rec => `
           <li class="flex items-start text-sm">
             <span class="text-green-500 mr-2 mt-0.5">âœ“</span>
             ${rec}
           </li>
         `).join('')}
       </ul>
     </div>
     
     <div class="text-center space-x-2">
       <button onclick="printScreeningResult()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 text-sm">
         ğŸ–¨ï¸ Cetak Hasil
       </button>
       <button onclick="openChat()" class="bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 text-sm">
         ğŸ’¬ Konsultasi AI
       </button>
     </div>
   </div>
 `;
 
 resultDiv.classList.remove('hidden');
 
 // Speak result
 speakText(`Hasil screening geriatri menunjukkan skor ${score} dari 14 dengan tingkat risiko ${risk}. ${recommendations[0]}`);
}

function printScreeningResult() {
 window.print();
}

/* === CHAT SYSTEM === */
const chatBody = document.getElementById('chatBody');
const chatInput = document.getElementById('chatInput');

function sendMessage() {
 const message = chatInput.value.trim();
 if (!message) return;
 
 appendMessage('user', message);
 chatInput.value = '';
 
 // Show typing indicator
 const typingDiv = document.createElement('div');
 typingDiv.className = 'chat-bot text-white p-3 rounded-2xl rounded-bl-md max-w-xs text-sm';
 typingDiv.innerHTML = '<p>AI sedang memproses...</p>';
 chatBody.appendChild(typingDiv);
 chatBody.scrollTop = chatBody.scrollHeight;
 
 // Simulate AI response delay
 setTimeout(() => {
   typingDiv.remove();
   const response = getAIResponse(message);
   appendMessage('bot', response);
   speakText(response);
 }, 1500);
}

function appendMessage(sender, text) {
 const messageDiv = document.createElement('div');
 messageDiv.className = sender === 'user' 
   ? 'chat-user text-white p-3 rounded-2xl rounded-br-md max-w-xs ml-auto text-sm' 
   : 'chat-bot text-white p-3 rounded-2xl rounded-bl-md max-w-xs text-sm';
 
 const p = document.createElement('p');
 p.textContent = text;
 messageDiv.appendChild(p);
 
 chatBody.appendChild(messageDiv);
 chatBody.scrollTop = chatBody.scrollHeight;
}

function getAIResponse(prompt) {
 const lowerPrompt = prompt.toLowerCase();
 
 // SIGAP specific responses
 if (lowerPrompt.includes('screening') || lowerPrompt.includes('14 item')) {
   return `ğŸ“‹ Screening Geriatri 14 item meliputi: gangguan penglihatan, pendengaran, keseimbangan/jatuh, malnutrisi, inkontinensia, depresi, kognitif, polyfarmacy, ADL, isolasi sosial, gangguan tidur, nyeri kronis, riwayat hospitalisasi, dan dukungan sosial. Skor â‰¥8 = risiko tinggi, perlu rujukan segera.`;
 }
 
 if (lowerPrompt.includes('sigap') || lowerPrompt.includes('aplikasi')) {
   return `ğŸ“± SIGAP (Sistem Informasi Geriatri Terpadu) memiliki 3 akses: 1) Pasien: Buku Laporan Geriatri Digital, 2) Keluarga/FKTP: Aplikasi SIGAP Mobile, 3) Dokter: ERM RSUD. Semua terintegrasi dengan data Sie Manis untuk identitas dan tanda vital.`;
 }
 
 if (lowerPrompt.includes('edukasi') || lowerPrompt.includes('klub')) {
   return `ğŸ“š Klub Edukasi Lansia setiap Jumat jam 09:00 di Ruang Edukasi RSUD Pasar Rebo. Format diskusi kelompok dengan media visual. Materi: Farmasi (lupa minum obat), Rehab Medik (cegah jatuh & risiko jantung), Keperawatan (hipertensi & DM). Sifatnya komunitas/club.`;
 }
 
 if (lowerPrompt.includes('poli') || lowerPrompt.includes('rawat jalan')) {
   return `ğŸ¥ Poli terkait geriatri: Jantung, Penyakit Dalam, Saraf, Orthopedi, Gizi, Rehab Medik. Khusus rawat jalan saja (tidak rawat inap). Sasaran: 60-64 tahun mandiri, >65 tahun dengan bantuan caregiver.`;
 }
 
 // Health responses
 if (lowerPrompt.includes('hipertensi') || lowerPrompt.includes('tekanan darah')) {
   return `ğŸ©º Hipertensi pada lansia: target <140/90 mmHg, diet rendah garam <5g/hari, olahraga ringan 30 menit/hari, kelola stress. Edukasi pola makan tersedia di video keperawatan setiap Jumat.`;
 }
 
 if (lowerPrompt.includes('diabetes') || lowerPrompt.includes('gula darah')) {
   return `ğŸ Diabetes lansia: target gula <180 mg/dL, makan teratur porsi kecil, pilih karbohidrat kompleks, monitor kaki harian. Video edukasi DM tersedia di klub edukasi.`;
 }
 
 if (lowerPrompt.includes('jatuh') || lowerPrompt.includes('keseimbangan')) {
   return `âš ï¸ Pencegahan jatuh: latihan keseimbangan, perbaiki pencahayaan, hilangkan hambatan di rumah, gunakan alat bantu jika perlu. Edukasi lengkap di Rehab Medik setiap Jumat.`;
 }
 
 if (lowerPrompt.includes('obat') || lowerPrompt.includes('farmasi')) {
   return `ğŸ’Š Tips jika lupa minum obat: 1) Segera minum jika <6 jam, 2) Skip jika >6 jam, lanjut dosis berikutnya, 3) Gunakan kotak obat harian, 4) Set alarm. Konsultasi farmasi setiap Jumat di klub edukasi.`;
 }
 
 // General responses
 const responses = [
   `ğŸ‘‹ Halo! Saya AI Assistant SIGAP. Saya dapat membantu informasi tentang screening geriatri 14 item, klub edukasi Jumat, akses aplikasi, dan konsultasi kesehatan lansia. Ada yang ingin ditanyakan?`,
   
   `ğŸ¥ Di SIGAP, kami melayani: 1) Screening geriatri komprehensif, 2) Edukasi komunitas setiap Jumat, 3) Konsultasi 6 poli geriatri, 4) Integrasi data Sie Manis. Rawat jalan khusus usia 60+ tahun.`,
   
   `ğŸ’¡ SIGAP memfokuskan pada: pencegahan, deteksi dini geriatric syndrome, edukasi berkelanjutan, dan dukungan keluarga. Tim multidisiplin siap membantu kesehatan optimal lansia.`
 ];
 
 return responses[Math.floor(Math.random() * responses.length)];
}

// Chat input events
chatInput.addEventListener('keydown', (e) => {
 if (e.key === 'Enter' && !e.shiftKey) {
   e.preventDefault();
   sendMessage();
 }
});

/* === EDUCATION SYSTEM === */
function openEducationVideo(type) {
 // This would integrate with actual video content
 const videos = {
   farmasi: 'Video: Tips Mengatasi Lupa Minum Obat',
   rehab: 'Video: Pencegahan Jatuh dan Risiko Jantung', 
   keperawatan: 'Video: Hipertensi dan Diabetes'
 };
 
 alert(`ğŸ¥ ${videos[type]}\n\nVideo edukasi akan diputar. Dalam implementasi nyata, ini akan terhubung dengan sistem video streaming RSUD Pasar Rebo.`);
}

function playEducationVideo(topic) {
 const videoData = {
   dm: {
     title: 'Manajemen Diabetes Mellitus untuk Lansia',
     description: 'Video edukasi komprehensif tentang pengelolaan diabetes pada lansia, termasuk diet, olahraga, dan monitoring gula darah.'
   },
   hipertensi: {
     title: 'Pola Makan untuk Hipertensi',
     description: 'Panduan diet DASH untuk lansia dengan hipertensi, tips mengurangi garam, dan menu sehat harian.'
   },
   jatuh: {
     title: 'Pencegahan Jatuh pada Lansia',
     description: 'Latihan keseimbangan, modifikasi rumah, dan strategi pencegahan jatuh yang efektif untuk lansia.'
   },
   jantung: {
     title: 'Mengenali Risiko Jantung',
     description: 'Tanda-tanda bahaya penyakit jantung pada lansia dan kapan harus segera ke rumah sakit.'
   },
   obat: {
     title: 'Tips Jika Lupa Minum Obat',
     description: 'Strategi praktis untuk memastikan kepatuhan minum obat dan apa yang harus dilakukan jika terlewat.'
   }
 };
 
 const data = videoData[topic];
 const videoPlayer = document.getElementById('videoPlayer');
 const videoTitle = document.getElementById('videoTitle');
 const videoDescription = document.getElementById('videoDescription');
 
 videoTitle.textContent = data.title;
 videoDescription.textContent = data.description;
 videoPlayer.classList.remove('hidden');
 
 speakText(`Memutar video: ${data.title}`);
}

function closeVideo() {
 document.getElementById('videoPlayer').classList.add('hidden');
}

/* === KEYBOARD SHORTCUTS === */
document.addEventListener('keydown', (e) => {
 if (e.key === 'Escape') {
   closeScreening();
   closeChat();
   closeEducation();
 }
});

/* === PWA INSTALLATION === */
let deferredPrompt;

window.addEventListener('beforeinstallprompt', (e) => {
 e.preventDefault();
 deferredPrompt = e;
 
 const installBtn = document.createElement('button');
 installBtn.className = 'fixed bottom-4 right-4 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-2 rounded-full shadow-lg hover:scale-105 transition-transform z-40 text-sm';
 installBtn.innerHTML = 'ğŸ“± Install SIGAP';
 installBtn.onclick = async () => {
   if (deferredPrompt) {
     deferredPrompt.prompt();
     const { outcome } = await deferredPrompt.userChoice;
     if (outcome === 'accepted') {
       installBtn.remove();
     }
     deferredPrompt = null;
   }
 };
 document.body.appendChild(installBtn);
 
 setTimeout(() => {
   if (installBtn.parentNode) {
     installBtn.style.opacity = '0.7';
   }
 }, 10000);
});

/* === SERVICE WORKER === */
if ('serviceWorker' in navigator) {
 window.addEventListener('load', () => {
   const swCode = `
     const CACHE_NAME = 'sigap-geriatricare-v1';
     const urlsToCache = [
       '/',
       'https://cdn.tailwindcss.com',
       'https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap',
       'https://cdn.jsdelivr.net/npm/chart.js'
     ];

     self.addEventListener('install', (event) => {
       event.waitUntil(
         caches.open(CACHE_NAME)
           .then((cache) => cache.addAll(urlsToCache))
       );
     });

     self.addEventListener('fetch', (event) => {
       event.respondWith(
         caches.match(event.request)
           .then((response) => {
             return response || fetch(event.request);
           })
       );
     });
   `;
   
   const blob = new Blob([swCode], { type: 'application/javascript' });
   const swUrl = URL.createObjectURL(blob);
   
   navigator.serviceWorker.register(swUrl)
     .then(() => console.log('SIGAP SW registered'))
     .catch(() => console.log('SIGAP SW registration failed'));
 });
}

/* === INITIALIZATION === */
document.addEventListener('DOMContentLoaded', () => {
 console.log('ğŸ¥ SIGAP GeriatriCare initialized successfully!');
 
 // Welcome message
 setTimeout(() => {
   if (speechEnabled) {
     speakText('Selamat datang di SIGAP GeriatriCare RSUD Pasar Rebo. Sistem informasi geriatri terpadu untuk pelayanan kesehatan lansia yang optimal.');
   }
 }, 2000);
});

// Prevent zoom on mobile
let lastTouchEnd = 0;
document.addEventListener('touchend', (event) => {
 const now = Date.now();
 if (now - lastTouchEnd <= 300) {
   event.preventDefault();
 }
 lastTouchEnd = now;
}, false);
</script>

</body>
</html>
